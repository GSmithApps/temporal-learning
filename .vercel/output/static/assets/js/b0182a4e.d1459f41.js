"use strict";(self.webpackChunktemporal_learning=self.webpackChunktemporal_learning||[]).push([[6303],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>d});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),p=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},m=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),m=p(n),d=r,h=m["".concat(s,".").concat(d)]||m[d]||u[d]||a;return n?o.createElement(h,i(i({ref:t},c),{},{components:n})):o.createElement(h,i({ref:t},c))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,i[1]=l;for(var p=2;p<a;p++)i[p]=n[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5162:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(7294),r=n(4334);const a="tabItem_Ymn6";function i(e){let{children:t,hidden:n,className:i}=e;return o.createElement("div",{role:"tabpanel",className:(0,r.Z)(a,i),hidden:n},t)}},4866:(e,t,n)=>{n.d(t,{Z:()=>T});var o=n(3117),r=n(7294),a=n(4334),i=n(6775),l=n(1980),s=n(7392),p=n(12);function c(e){return function(e){return r.Children.map(e,(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:n,attributes:o,default:r}}=e;return{value:t,label:n,attributes:o,default:r}}))}function u(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??c(n);return function(e){const t=(0,s.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function m(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function d(e){let{queryString:t=!1,groupId:n}=e;const o=(0,i.k6)(),a=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,l._X)(a),(0,r.useCallback)((e=>{if(!a)return;const t=new URLSearchParams(o.location.search);t.set(a,e),o.replace({...o.location,search:t.toString()})}),[a,o])]}function h(e){const{defaultValue:t,queryString:n=!1,groupId:o}=e,a=u(e),[i,l]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const o=n.find((e=>e.default))??n[0];if(!o)throw new Error("Unexpected error: 0 tabValues");return o.value}({defaultValue:t,tabValues:a}))),[s,c]=d({queryString:n,groupId:o}),[h,k]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[o,a]=(0,p.Nk)(n);return[o,(0,r.useCallback)((e=>{n&&a.set(e)}),[n,a])]}({groupId:o}),f=(()=>{const e=s??h;return m({value:e,tabValues:a})?e:null})();(0,r.useLayoutEffect)((()=>{f&&l(f)}),[f]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!m({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);l(e),c(e),k(e)}),[c,k,a]),tabValues:a}}var k=n(2466),f=n(2389);const w="tabList__CuJ",g="tabItem_LNqP";function y(e){let{className:t,block:n,selectedValue:i,selectValue:l,tabValues:s}=e;const p=[],{blockElementScrollPositionUntilNextRender:c}=(0,k.o5)(),u=e=>{const t=e.currentTarget,n=p.indexOf(t),o=s[n].value;o!==i&&(c(t),l(o))},m=e=>{let t=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const n=p.indexOf(e.currentTarget)+1;t=p[n]??p[0];break}case"ArrowLeft":{const n=p.indexOf(e.currentTarget)-1;t=p[n]??p[p.length-1];break}}t?.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.Z)("tabs",{"tabs--block":n},t)},s.map((e=>{let{value:t,label:n,attributes:l}=e;return r.createElement("li",(0,o.Z)({role:"tab",tabIndex:i===t?0:-1,"aria-selected":i===t,key:t,ref:e=>p.push(e),onKeyDown:m,onClick:u},l,{className:(0,a.Z)("tabs__item",g,l?.className,{"tabs__item--active":i===t})}),n??t)})))}function v(e){let{lazy:t,children:n,selectedValue:o}=e;const a=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=a.find((e=>e.props.value===o));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},a.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==o}))))}function b(e){const t=h(e);return r.createElement("div",{className:(0,a.Z)("tabs-container",w)},r.createElement(y,(0,o.Z)({},e,t)),r.createElement(v,(0,o.Z)({},e,t)))}function T(e){const t=(0,f.Z)();return r.createElement(b,(0,o.Z)({key:String(t)},e))}},6645:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>l,metadata:()=>p,toc:()=>u});var o=n(3117),r=(n(7294),n(3905)),a=n(5162),i=n(4866);const l={id:"hello-world-ts",title:"Build a Temporal Application from scratch in TypeScript",sidebar_position:3,keywords:["typescript","javascript","temporal","sdk","tutorial","learn"],description:"In this tutorial you will build a Temporal Application using the TypeScript SDK. You'll write a Workflow, an Activity, and define a Worker.",tags:["TypeScript","SDK"],last_update:{date:new Date("2022-12-20T00:00:00.000Z")},image:"/img/temporal-logo-twitter-card.png",pagination_next:"courses/temporal_101/typescript"},s=void 0,p={unversionedId:"getting_started/typescript/hello_world_in_typescript/hello-world-ts",id:"getting_started/typescript/hello_world_in_typescript/hello-world-ts",title:"Build a Temporal Application from scratch in TypeScript",description:"In this tutorial you will build a Temporal Application using the TypeScript SDK. You'll write a Workflow, an Activity, and define a Worker.",source:"@site/docs/getting_started/typescript/hello_world_in_typescript/index.md",sourceDirName:"getting_started/typescript/hello_world_in_typescript",slug:"/getting_started/typescript/hello_world_in_typescript/",permalink:"/getting_started/typescript/hello_world_in_typescript/",draft:!1,tags:[{label:"TypeScript",permalink:"/tags/type-script"},{label:"SDK",permalink:"/tags/sdk"}],version:"current",lastUpdatedAt:1671494400,formattedLastUpdatedAt:"Dec 20, 2022",sidebarPosition:3,frontMatter:{id:"hello-world-ts",title:"Build a Temporal Application from scratch in TypeScript",sidebar_position:3,keywords:["typescript","javascript","temporal","sdk","tutorial","learn"],description:"In this tutorial you will build a Temporal Application using the TypeScript SDK. You'll write a Workflow, an Activity, and define a Worker.",tags:["TypeScript","SDK"],last_update:{date:"2022-12-20T00:00:00.000Z"},image:"/img/temporal-logo-twitter-card.png",pagination_next:"courses/temporal_101/typescript"},sidebar:"tutorialSidebar",previous:{title:"Run your first Temporal application with the TypeScript SDK",permalink:"/getting_started/typescript/first_program_in_typescript/"},next:{title:"Temporal 101 with TypeScript",permalink:"/courses/temporal_101/typescript"}},c={},u=[{value:"Introduction",id:"introduction",level:3},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Create a new project",id:"create-a-new-project",level:2},{value:"Create a Workflow",id:"create-a-workflow",level:2},{value:"Create an Activity",id:"create-an-activity",level:2},{value:"Configure and run a Worker",id:"configure-and-run-a-worker",level:2},{value:"Configure a Workflow Execution",id:"configure-a-workflow-execution",level:2},{value:"Start a Workflow Execution",id:"start-a-workflow-execution",level:2},{value:" Add a unit test",id:"-add-a-unit-test",level:2},{value:"Conclusion",id:"conclusion",level:2},{value:"Review",id:"review",level:3}],m={toc:u};function d(e){let{components:t,...l}=e;return(0,r.kt)("wrapper",(0,o.Z)({},m,l,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Temporal TypeScript SDK",src:n(2813).Z,width:"902",height:"254"})),(0,r.kt)("admonition",{title:"Tutorial information",type:"note"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Level:")," \u2b50 Temporal beginner"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Time:")," \u23f1\ufe0f ~15 minutes"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Goals:")," \ud83d\ude4c",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Set up, build, and test a Temporal application project from scratch using the ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/temporalio/sdk-typescript"},"TypeScript SDK"),"."),(0,r.kt)("li",{parentName:"ul"},"Identify the four parts of a Temporal Workflow application."),(0,r.kt)("li",{parentName:"ul"},"Describe how the Temporal Server gets information to the Worker."))))),(0,r.kt)("h3",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"Creating reliable applications is a difficult task. ",(0,r.kt)("a",{parentName:"p",href:"https://temporal.io"},"Temporal")," lets you create fault-tolerant, resilient applications using programming languages you already know, so you can build complex applications that execute reliably and recover from failures."),(0,r.kt)("p",null,"In this tutorial, you will build your first Temporal Application from scratch using the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/temporalio/sdk-typescript"},"Temporal TypeScript SDK"),". The app will consist of four pieces:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"A ",(0,r.kt)("a",{parentName:"li",href:"https://docs.temporal.io/workflows"},"Workflow"),": Workflows are functions that define the overall flow of the application."),(0,r.kt)("li",{parentName:"ol"},"An ",(0,r.kt)("a",{parentName:"li",href:"https://docs.temporal.io/activities"},"Activity"),": Activities are functions called by Workflows, and they contain any logic that might fail or behave differently at different times. The Workflow you'll create executes a single Activity that takes a string as input and returns a formatted version of this string to the Workflow."),(0,r.kt)("li",{parentName:"ol"},"A ",(0,r.kt)("a",{parentName:"li",href:"https://docs.temporal.io/workers"},"Worker"),": Workers host the Activity and Workflow code and executes the code piece by piece."),(0,r.kt)("li",{parentName:"ol"},"An initiator: To start a Workflow, you need to create a Client instance and call the ",(0,r.kt)("inlineCode",{parentName:"li"},".start()")," method. You'll write a separate script to do this.")),(0,r.kt)("p",null,"You'll also write a unit test to ensure your Workflow executes successfully."),(0,r.kt)("p",null,"When you're done, you'll have a basic application and a clear understanding of how to build out the components you'll need in future Temporal applications."),(0,r.kt)("p",null,"All of the code in this tutorial is available in the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/temporalio/samples-typescript/tree/main/hello-world"},"hello-world")," directory of the ",(0,r.kt)("inlineCode",{parentName:"p"},"temporalio/samples-typescript")," repository."),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("p",null,"Before starting this tutorial:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/getting_started/typescript/dev_environment/"},"Set up a local development environment for developing Temporal applications using Node.js and TypeScript")),(0,r.kt)("li",{parentName:"ul"},"Follow the tutorial ",(0,r.kt)("a",{parentName:"li",href:"/getting_started/typescript/first_program_in_typescript/"},"Run your first Temporal application with the TypeScript SDK")," to gain a better understanding of what Temporal is and how its components fit together.")),(0,r.kt)("p",null,"The TypeScript SDK requires Node.js 18 or later."),(0,r.kt)("h2",{id:"create-a-new-project"},"Create a new project"),(0,r.kt)("p",null,"This is a step by step guide that shows you how to create a project from scratch, and the goal is for you to better understand the structure of a Temporal application by creating the files on your own."),(0,r.kt)("p",null,"This project exists in its entirety in the ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/temporalio/samples-typescript/tree/main/hello-world"},"Temporal TypeScript samples repo"),". To skip these manual steps and get the project running locally, use the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.temporal.io/typescript/package-initializer#optional-flags"},"package initializer")," command ",(0,r.kt)("inlineCode",{parentName:"p"},"npx @temporalio/create@latest hello-world --sample hello-world")),(0,r.kt)("p",null,"To build an app with the Temporal TypeScript SDK, you'll create a new directory and use ",(0,r.kt)("inlineCode",{parentName:"p"},"npm")," to initialize it as a Node.js project. Then you'll add the Temporal SDK packages and other dependencies to your project."),(0,r.kt)("p",null,"In a terminal, create a new project directory called ",(0,r.kt)("inlineCode",{parentName:"p"},"hello-world"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-command"},"mkdir hello-world\n")),(0,r.kt)("p",null,"Switch to the new directory:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-command"},"cd hello-world\n")),(0,r.kt)("p",null,"Create the ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json")," file in the root of your project and add the following code to the file that defines the project, sets up scripts, and defines the dependencies this project requires:"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/temporalio/samples-typescript/blob/main/hello-world/package.json"},"package.json")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "name": "temporal-hello-world",\n  "version": "0.1.0",\n  "private": true,\n  "scripts": {\n    "build": "tsc --build",\n    "build.watch": "tsc --build --watch",\n    "lint": "eslint .",\n    "start": "ts-node src/worker.ts",\n    "start.watch": "nodemon src/worker.ts",\n    "workflow": "ts-node src/client.ts",\n    "format": "prettier --config .prettierrc \'src/**/*.ts\' --write",\n    "test": "mocha --exit --require ts-node/register --require source-map-support/register src/mocha/*.test.ts"\n  },\n  "nodemonConfig": {\n    "execMap": {\n      "ts": "ts-node"\n    },\n    "ext": "ts",\n    "watch": [\n      "src"\n    ]\n  },\n  "dependencies": {\n    "@temporalio/activity": "^1.9.0",\n    "@temporalio/client": "^1.9.0",\n    "@temporalio/worker": "^1.9.0",\n    "@temporalio/workflow": "^1.9.0",\n    "nanoid": "3.x"\n  },\n  "devDependencies": {\n    "@temporalio/testing": "^1.9.0",\n    "@tsconfig/node16": "^1.0.0",\n    "@types/mocha": "8.x",\n    "@types/node": "^16.11.43",\n    "@typescript-eslint/eslint-plugin": "^5.0.0",\n    "@typescript-eslint/parser": "^5.0.0",\n    "eslint": "^7.32.0",\n    "eslint-config-prettier": "^8.3.0",\n    "eslint-plugin-deprecation": "^1.2.1",\n    "mocha": "8.x",\n    "nodemon": "^2.0.12",\n    "prettier": "^2.8.8",\n    "ts-node": "^10.8.1",\n    "typescript": "^4.4.2"\n  }\n}\n')),(0,r.kt)("p",null,"You should review a few parts of the ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json"),", and the first is the ",(0,r.kt)("inlineCode",{parentName:"p"},"scripts")," section. These are the ",(0,r.kt)("inlineCode",{parentName:"p"},"npm")," commands you'll use to build, lint, and start your application code."),(0,r.kt)("p",null,"Next, examine the packages listed as dependencies. These are the packages that compose the Temporal TypeScript SDK, and each package maps to the four parts of a Temporal application: an Activity, Client, Worker, and Workflow. There is also ",(0,r.kt)("a",{parentName:"p",href:"https://npmjs.com/package/nanoid"},"Nanoid"),", an ",(0,r.kt)("inlineCode",{parentName:"p"},"npm")," package which you'll use to generate a unique identifier for your Workflow."),(0,r.kt)("p",null,"Finally, look through the ",(0,r.kt)("inlineCode",{parentName:"p"},"devDependencies")," section. These are the packages that let you set up a Node.js project with ",(0,r.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/nodemon"},"Nodemon")," (a tool that automatically restarts your application when it detects a change in your code), TypeScript, ESLint, and ts-node."),(0,r.kt)("p",null,"Save the file, then download the dependencies specified in the ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json")," file with the command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-command"},"npm install\n")),(0,r.kt)("p",null,"Downloading the dependencies can take a few minutes to complete. Once the download is done, you will have new a ",(0,r.kt)("inlineCode",{parentName:"p"},"package-lock.json")," file and a ",(0,r.kt)("inlineCode",{parentName:"p"},"node_modules")," directory."),(0,r.kt)("p",null,"Your project workspace is configured, so you're ready to create your first Temporal Activity and Workflow. You'll start with the Workflow."),(0,r.kt)("h2",{id:"create-a-workflow"},"Create a Workflow"),(0,r.kt)("p",null,"Workflows are where you configure and organize the execution of Activities. You define a Workflow by writing a ",(0,r.kt)("em",{parentName:"p"},"Workflow Definition")," using one of the Temporal SDKs. You can learn more in the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.temporal.io/dev-guide/typescript/foundations/#develop-workflows"},"Develop Workflows")," section of the Temporal documentation."),(0,r.kt)("p",null,"To begin your Workflow, create a new subdirectory called ",(0,r.kt)("inlineCode",{parentName:"p"},"src"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-command"},"mkdir src\n")),(0,r.kt)("p",null,"Create the file ",(0,r.kt)("inlineCode",{parentName:"p"},"workflows.ts")," in the ",(0,r.kt)("inlineCode",{parentName:"p"},"src")," directory."),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"Below, there are two language tabs (TypeScript and JavaScript). TypeScript is selected by default, and you will add that code to your file. The JavaScript code is an example of the code that the TypeScript compiler will generate, and you do not need to copy and paste it. This is true for all the following code samples.")),(0,r.kt)("p",null,"Next, add the following TypeScript code to define the Workflow:"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/temporalio/samples-typescript/blob/main/hello-world/src/workflows.ts"},"hello-world/src/workflows.ts")),(0,r.kt)(i.Z,{groupId:"language",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},(0,r.kt)(a.Z,{value:"ts",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"import { proxyActivities } from '@temporalio/workflow';\n// Only import the activity types\nimport type * as activities from './activities';\n\nconst { greet } = proxyActivities<typeof activities>({\n  startToCloseTimeout: '1 minute',\n});\n\n/** A workflow that simply calls an activity */\nexport async function example(name: string): Promise<string> {\n  return await greet(name);\n}\n"))),(0,r.kt)(a.Z,{value:"js",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import { proxyActivities } from '@temporalio/workflow';\n\nconst { greet } = proxyActivities({\n  startToCloseTimeout: '1 minute',\n});\n\n/** A workflow that simply calls an activity */\nexport async function example(name) {\n  return await greet(name);\n}\n")))),(0,r.kt)("p",null,"In this code, the variable ",(0,r.kt)("inlineCode",{parentName:"p"},"greet")," is assigned the value of ",(0,r.kt)("inlineCode",{parentName:"p"},"proxyActivites"),", which is a method from the Temporal TypeScript SDK that lets you configure the Activity with different options. In this example, you have specified that the Start-to-Close Timeout for your Activity will be one minute, meaning that your Activity has one minute to begin before it times out. Of all the Temporal timeout options, ",(0,r.kt)("inlineCode",{parentName:"p"},"startToCloseTimeOut")," is the one you should always set."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"example")," function executes an Activity called ",(0,r.kt)("inlineCode",{parentName:"p"},"greet"),", and the function returns the result of the Activity. You'll create the ",(0,r.kt)("inlineCode",{parentName:"p"},"greet")," function in the next section."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"No matter how many inputs you pass to a Workflow, it's a best practice to use an object. There are some JSON restrictions that you should be aware of, and you can learn more about the kinds of inputs you can pass to a Workflow in the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.temporal.io/dev-guide/typescript/foundations#workflow-parameters"},"Workflow parameters")," section of the Temporal documentation.")),(0,r.kt)("p",null,"Next, you'll define the Activity that your Workflow will execute."),(0,r.kt)("h2",{id:"create-an-activity"},"Create an Activity"),(0,r.kt)("p",null,"You use Activities in your Temporal Applications to execute non-deterministic code or perform operations that may fail."),(0,r.kt)("p",null,"For this tutorial, your Activity won't be complex; you'll create an Activity that takes a string as input and uses it to create a new string as output, which is then returned to the Workflow. This will let you see how Workflows and Activities work together without building something complicated."),(0,r.kt)("p",null,"With the Temporal TypeScript SDK, you define Activities similarly to how you define Workflows: using an exportable TypeScript module."),(0,r.kt)("p",null,"Your Activity Definition can accept input parameters. Review the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.temporal.io/dev-guide/typescript/foundations/#activity-parameters"},"Activity parameters")," section of the Temporal documentation for more details, as there are some limitations you'll want to be aware of when running more complex applications."),(0,r.kt)("p",null,"Create the file ",(0,r.kt)("inlineCode",{parentName:"p"},"activities.ts")," in the ",(0,r.kt)("inlineCode",{parentName:"p"},"src")," directory:"),(0,r.kt)("p",null,"Add the following code to define a ",(0,r.kt)("inlineCode",{parentName:"p"},"greet")," function:"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/temporalio/samples-typescript/blob/main/hello-world/src/activities.ts"},"hello-world/src/activities.ts")),(0,r.kt)(i.Z,{groupId:"language",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},(0,r.kt)(a.Z,{value:"ts",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"export async function greet(name: string): Promise<string> {\n  return `Hello, ${name}!`;\n}\n"))),(0,r.kt)(a.Z,{value:"js",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"export async function greet(name) {\n  return `Hello, ${name}!`;\n}\n")))),(0,r.kt)("p",null,"You've completed the logic for the application; you have a Workflow and an Activity defined. Next, you'll write code to configure and launch a Worker."),(0,r.kt)("h2",{id:"configure-and-run-a-worker"},"Configure and run a Worker"),(0,r.kt)("p",null,"A ",(0,r.kt)("a",{parentName:"p",href:"https://docs.temporal.io/concepts/what-is-a-worker"},"Worker")," hosts Workflow and Activity functions and executes them one at a time. The Temporal Server tells the Worker to execute a specific function from information it pulls from the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.temporal.io/concepts/what-is-a-task-queue"},"Task Queue"),". After the Worker runs the code, it communicates the results back to the Temporal Server."),(0,r.kt)("p",null,"Create a file called ",(0,r.kt)("inlineCode",{parentName:"p"},"worker.ts")," and add the following code to define the Worker:"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/temporalio/samples-typescript/blob/main/hello-world/src/worker.ts"},"hello-world/src/worker.ts")),(0,r.kt)(i.Z,{groupId:"language",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},(0,r.kt)(a.Z,{value:"ts",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"import { NativeConnection, Worker } from '@temporalio/worker';\nimport * as activities from './activities';\n\nasync function run() {\n  // Step 1: Establish a connection with Temporal server.\n  //\n  // Worker code uses `@temporalio/worker.NativeConnection`.\n  // (But in your application code it's `@temporalio/client.Connection`.)\n  const connection = await NativeConnection.connect({\n    address: 'localhost:7233',\n    // TLS and gRPC metadata configuration goes here.\n  });\n  // Step 2: Register Workflows and Activities with the Worker.\n  const worker = await Worker.create({\n    connection,\n    namespace: 'default',\n    taskQueue: 'hello-world',\n    // Workflows are registered using a path as they run in a separate JS context.\n    workflowsPath: require.resolve('./workflows'),\n    activities,\n  });\n\n  // Step 3: Start accepting tasks on the `hello-world` queue\n  //\n  // The worker runs until it encounters an unexpected error or the process receives a shutdown signal registered on\n  // the SDK Runtime object.\n  //\n  // By default, worker logs are written via the Runtime logger to STDERR at INFO level.\n  //\n  // See https://typescript.temporal.io/api/classes/worker.Runtime#install to customize these defaults.\n  await worker.run();\n}\n\nrun().catch((err) => {\n  console.error(err);\n  process.exit(1);\n});\n"))),(0,r.kt)(a.Z,{value:"js",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import { NativeConnection, Worker } from '@temporalio/worker';\nimport * as activities from './activities';\n\nasync function run() {\n  // Step 1: Establish a connection with Temporal server.\n  //\n  // Worker code uses `@temporalio/worker.NativeConnection`.\n  // (But in your application code it's `@temporalio/client.Connection`.)\n  const connection = await NativeConnection.connect({\n    address: 'localhost:7233',\n    // TLS and gRPC metadata configuration goes here.\n  });\n  // Step 2: Register Workflows and Activities with the Worker.\n  const worker = await Worker.create({\n    connection,\n    namespace: 'default',\n    taskQueue: 'hello-world',\n    // Workflows are registered using a path as they run in a separate JS context.\n    workflowsPath: require.resolve('./workflows'),\n    activities,\n  });\n  \n  // Step 3: Start accepting tasks on the `hello-world` queue\n  //\n  // The worker runs until it encounters an unexpected error or the process receives a shutdown signal registered on\n  // the SDK Runtime object.\n  //\n  // By default, worker logs are written via the Runtime logger to STDERR at INFO level.\n  //\n  // See https://typescript.temporal.io/api/classes/worker.Runtime#install to customize these defaults.\n  await worker.run();\n}\n\nrun().catch((err) => {\n  console.error(err);\n  process.exit(1);\n});\n")))),(0,r.kt)("p",null,"In the code, you create and call an async function named ",(0,r.kt)("inlineCode",{parentName:"p"},"run"),". It creates and runs a Worker. It configures the Worker with a ",(0,r.kt)("inlineCode",{parentName:"p"},"workflowsPath")," (the location of your workflow file), your Activity functions, and the name of the Task Queue. In this example, you name the Task Queue ",(0,r.kt)("inlineCode",{parentName:"p"},"hello-world"),"."),(0,r.kt)("p",null,"Now you will use an ",(0,r.kt)("inlineCode",{parentName:"p"},"npm")," script to start your Worker using Nodemon, which will reload whenever it detects changes in your file, hence the command name ",(0,r.kt)("inlineCode",{parentName:"p"},"start.watch"),". Run the command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-command"},"npm run start.watch\n")),(0,r.kt)("p",null,"The script runs and produces output similar to the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-output"},"> temporal-hello-world@0.1.0 start\n> ts-node src/worker.ts workflow.watch\n\n2023-11-22T04:38:12.091Z [INFO] Creating worker {\n  options: {\n    namespace: 'default',\n    identity: '65411@User-MacBook-Pro.local',\n    shutdownGraceTime: '10s',\n    maxConcurrentActivityTaskExecutions: 100,\n    maxConcurrentLocalActivityExecutions: 100,\n    enableNonLocalActivities: true,\n    maxConcurrentWorkflowTaskExecutions: 100,\n    stickyQueueScheduleToStartTimeout: '10s',\n    maxHeartbeatThrottleInterval: '60s',\n    defaultHeartbeatThrottleInterval: '30s',\n    isolateExecutionTimeout: '5s',\n    workflowThreadPoolSize: 8,\n    maxCachedWorkflows: 261,\n    enableSDKTracing: false,\n    showStackTraceSources: false,\n    debugMode: false,\n    interceptors: { activityInbound: [Array], workflowModules: [Array] },\n    sinks: { defaultWorkerLogger: [Object] },\n    workflowsPath: '/Users/username/hello-world-temporal/src/workflows.ts',\n    activities: { greet: [AsyncFunction: greet] },\n    taskQueue: 'hello-world',\n    shutdownGraceTimeMs: 10000,\n    stickyQueueScheduleToStartTimeoutMs: 10000,\n    isolateExecutionTimeoutMs: 5000,\n    maxHeartbeatThrottleIntervalMs: 60000,\n    defaultHeartbeatThrottleIntervalMs: 30000,\n    loadedDataConverter: {\n      payloadConverter: [DefaultPayloadConverter],\n      failureConverter: [DefaultFailureConverter],\n      payloadCodecs: []\n    }\n  }\n}\n2023-11-22T04:38:13.298Z [INFO] asset workflow-bundle-d624b57670e912aab581.js 695 KiB [emitted] [immutable] (name: main)\n2023-11-22T04:38:13.298Z [INFO] runtime modules 937 bytes 4 modules\n2023-11-22T04:38:13.298Z [INFO] modules by path ./node_modules/@temporalio/ 209 KiB\n2023-11-22T04:38:13.298Z [INFO]   modules by path ./node_modules/@temporalio/common/ 111 KiB 19 modules\n2023-11-22T04:38:13.298Z [INFO]   modules by path ./node_modules/@temporalio/workflow/ 95.2 KiB\n2023-11-22T04:38:13.298Z [INFO]     ./node_modules/@temporalio/workflow/lib/worker-interface.js 11.8 KiB [built] [code generated]\n2023-11-22T04:38:13.299Z [INFO]     ./node_modules/@temporalio/workflow/lib/alea.js 2.87 KiB [built] [code generated]\n2023-11-22T04:38:13.299Z [INFO]     + 11 modules\n2023-11-22T04:38:13.299Z [INFO]   ./node_modules/@temporalio/worker/lib/workflow-log-interceptor.js 2.25 KiB [built] [code generated]\n2023-11-22T04:38:13.299Z [INFO] modules by path ./src/ 784 bytes\n2023-11-22T04:38:13.299Z [INFO]   ./src/workflows-autogenerated-entrypoint.js 540 bytes [built] [code generated]\n2023-11-22T04:38:13.299Z [INFO]   ./src/workflows.ts 244 bytes [built] [code generated]\n2023-11-22T04:38:13.299Z [INFO] __temporal_custom_payload_converter (ignored) 15 bytes [built] [code generated]\n2023-11-22T04:38:13.299Z [INFO] __temporal_custom_failure_converter (ignored) 15 bytes [built] [code generated]\n2023-11-22T04:38:13.299Z [INFO] ./node_modules/ms/index.js 2.95 KiB [built] [code generated]\n2023-11-22T04:38:13.299Z [INFO] webpack 5.75.0 compiled successfully in 540 ms\n2023-11-22T04:38:13.303Z [INFO] Workflow bundle created { size: '0.68MB' }\n2023-11-22T04:38:13.751Z [INFO] Worker state changed { state: 'RUNNING' }\n")),(0,r.kt)("p",null,"In the output, you will see the Worker options and their values, the Webpack bundling output, and timestamps from Nodemon describing which programs have been invoked."),(0,r.kt)("p",null,"Now that you have your Worker running, it's time for you to start a Workflow Execution."),(0,r.kt)("h2",{id:"configure-a-workflow-execution"},"Configure a Workflow Execution"),(0,r.kt)("p",null,"You can start a Workflow Execution by using the Temporal CLI or by writing code using the Temporal SDK."),(0,r.kt)("p",null,"Starting a Workflow Execution using the Temporal SDK involves connecting to the Temporal Server, configuring the Task Queue the Workflow should use, and starting the Workflow with the input parameters it expects. In a real application, you may invoke this code when someone submits a form, presses a button, or visits a certain URL. In this tutorial, you will create a ",(0,r.kt)("inlineCode",{parentName:"p"},"client.ts")," file that triggers your Temporal Workflow."),(0,r.kt)("p",null,"Open a new tab in your terminal, create a ",(0,r.kt)("inlineCode",{parentName:"p"},"client.ts")," file in the ",(0,r.kt)("inlineCode",{parentName:"p"},"src")," directory, and add the following code to your file to create a client that will kick off your Workflow Execution:"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/temporalio/samples-typescript/blob/main/hello-world/src/client.ts"},"hello-world/src/client.ts")),(0,r.kt)(i.Z,{groupId:"language",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},(0,r.kt)(a.Z,{value:"ts",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"import { Connection, Client } from '@temporalio/client';\nimport { example } from './workflows';\nimport { nanoid } from 'nanoid';\n\nasync function run() {\n  // Connect to the default Server location\n  const connection = await Connection.connect({ address: 'localhost:7233' });\n  // In production, pass options to configure TLS and other settings:\n  // {\n  //   address: 'foo.bar.tmprl.cloud',\n  //   tls: {}\n  // }\n\n  const client = new Client({\n    connection,\n    // namespace: 'foo.bar', // connects to 'default' namespace if not specified\n  });\n\n  const handle = await client.workflow.start(example, {\n    taskQueue: 'hello-world',\n    // type inference works! args: [name: string]\n    args: ['Temporal'],\n    // in practice, use a meaningful business ID, like customerId or transactionId\n    workflowId: 'workflow-' + nanoid(),\n  });\n  console.log(`Started workflow ${handle.workflowId}`);\n\n  // optional: wait for client result\n  console.log(await handle.result()); // Hello, Temporal!\n}\n\nrun().catch((err) => {\n  console.error(err);\n  process.exit(1);\n});\n"))),(0,r.kt)(a.Z,{value:"js",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import { Connection, Client } from '@temporalio/client';\nimport { example } from './workflows';\nimport { nanoid } from 'nanoid';\n\nasync function run() {\n  // Connect to the default Server location\n  const connection = await Connection.connect({ address: 'localhost:7233' });\n  // In production, pass options to configure TLS and other settings:\n  // {\n  //   address: 'foo.bar.tmprl.cloud',\n  //   tls: {}\n  // }\n  \n  const client = new Client({\n    connection,\n    // namespace: 'foo.bar', // connects to 'default' namespace if not specified\n  });\n  \n  const handle = await client.workflow.start(example, {\n    taskQueue: 'hello-world',\n    // type inference works! args: [name: string]\n    args: ['Temporal'],\n    // in practice, use a meaningful business ID, like customerId or transactionId\n    workflowId: 'workflow-' + nanoid(),\n  });\n  console.log(`Started workflow ${handle.workflowId}`);\n  \n  // optional: wait for client result\n  console.log(await handle.result()); // Hello, Temporal!\n}\n\nrun().catch((err) => {\n  console.error(err);\n  process.exit(1);\n});\n")))),(0,r.kt)("p",null,"In the ",(0,r.kt)("inlineCode",{parentName:"p"},"client.ts")," file, the ",(0,r.kt)("inlineCode",{parentName:"p"},"run")," function sets up a connection to your Temporal Server, invokes your Workflow, passes in an argument for the ",(0,r.kt)("inlineCode",{parentName:"p"},"name")," parameter (in this example, the name is Temporal) and assigns the Workflow a unique identifier with Nanoid. The client dispatches the Workflow on the same ",(0,r.kt)("inlineCode",{parentName:"p"},"hello-world")," Task Queue that the Worker is polling on."),(0,r.kt)("admonition",{title:"Specify a Workflow Id",type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"A Workflow Id is unique in a namespace and is used for deduplication. Using an identifier that reflects some business process or entity is a good practice. For example, you might use a customer identifier as part of the Workflow Id if you run one Workflow per customer. This would make it easier to find all of the Workflow Executions related to that customer later.")),(0,r.kt)("admonition",{title:"Get your results now or later",type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"You can ",(0,r.kt)("a",{parentName:"p",href:"https://docs.temporal.io/dev-guide/typescript/foundations/#get-workflow-results"},"get the results")," from your Workflow right away, or you can get the results at a later time. This implementation attempts to get the results immediately by logging the output of the ",(0,r.kt)("inlineCode",{parentName:"p"},"example")," Workflow which in turn calls the ",(0,r.kt)("inlineCode",{parentName:"p"},"greet")," Activity.")),(0,r.kt)("p",null,"Now that your client code is written, it's time for you to use this code to start your Workflow Execution."),(0,r.kt)("h2",{id:"start-a-workflow-execution"},"Start a Workflow Execution"),(0,r.kt)("p",null,"To start your Workflow, open a new tab in your terminal and run the ",(0,r.kt)("inlineCode",{parentName:"p"},"npm")," script:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-command"},"npm run workflow\n")),(0,r.kt)("p",null,"The script runs and prints the result:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Hello, Temporal!\n")),(0,r.kt)("p",null,'The "Hello, Temporal!" output is generated as the result of a few steps. First, ',(0,r.kt)("inlineCode",{parentName:"p"},"client.ts")," passes ",(0,r.kt)("inlineCode",{parentName:"p"},"Temporal")," as an argument to the Workflow. Next, the Workflow passes the argument to the Activity, and finally the Activity returns ",(0,r.kt)("inlineCode",{parentName:"p"},"Hello, ${name}!"),"."),(0,r.kt)("p",null,"You have successfully built a Temporal application from scratch!"),(0,r.kt)("h2",{id:"-add-a-unit-test"},(0,r.kt)("img",{src:n(5986).Z,width:"50",height:"50"})," Add a unit test"),(0,r.kt)("p",null,"The Temporal TypeScript SDK includes functions that help you test your Workflow executions. Let's add a basic unit test to the application to make sure the Workflow works as expected."),(0,r.kt)("p",null,"You'll use the ",(0,r.kt)("a",{parentName:"p",href:"https://mochajs.org/"},"mocha")," package to build your test cases and mock the Activity so you can test the Workflow in isolation. You'll also use the ",(0,r.kt)("inlineCode",{parentName:"p"},"@temporalio/testing")," package which will download a test server which provides a ",(0,r.kt)("inlineCode",{parentName:"p"},"TestWorkflowEnvironment"),"."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"TestWorkflowEnvironment")," is a runtime environment used to test a Workflow. It is used to connect the Client and Worker to the test server and interact with the test server. You'll use this to register your Workflow Type and access information about the Workflow Execution, such as whether it completed successfully and the result or error it returned. Since the ",(0,r.kt)("inlineCode",{parentName:"p"},"TestWorkflowEnvironment")," will be shared across tests, you will set it up before all of your\ntests, and tear it down after your tests are done."),(0,r.kt)("p",null,'When running your Workflow code within the test environment, some aspects\nof its execution will work differently to better support testing. For\nexample, Timers will "skip time" by firing without their normal delay,\nenabling you to quickly test long-running Workflows.'),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"TestWorkflowEnvironment.createTimeSkipping")," starts a time skipping workflow environment. Alternatively, as you will see in the example below, you can use the ",(0,r.kt)("inlineCode",{parentName:"p"},"TestWorkflowEnvironment.createLocal")," method to start a workflow environment that includes full server capabilities but no support for time skipping."),(0,r.kt)("p",null,"To set up your tests, add ",(0,r.kt)("inlineCode",{parentName:"p"},"mocha")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"@temporalio/testing")," to your ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json")," file along with the types as development dependencies:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},'"devDependencies": {\n    "@temporalio/testing": "~1.9.0",\n    "@types/mocha": "8.x",\n    "mocha": "8.x"\n}\n')),(0,r.kt)("p",null,"Running the tests requires using the ",(0,r.kt)("inlineCode",{parentName:"p"},"mocha")," command along with requiring the following libraries and pointing the test runner to the appropriate folder. Here's what the command would look like to run the tests:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-command"},"npx  mocha \\\n  --require ts-node/register \\\n  --require source-map-support/register \\\n  src/mocha/*.test.ts\n")),(0,r.kt)("p",null,"However, since this is quite verbose to type into the command line every time, we recommend that you add this command into the scripts of your ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json")," file like so:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},'"scripts": {\n  ...\n  "test": "mocha --require ts-node/register --require source-map-support/register src/mocha/*.test.ts"\n  ...\n},\n')),(0,r.kt)("p",null,"Save the file and execute your tests with the script:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-command"},"npm test\n")),(0,r.kt)("p",null,"The following code provides an example of how you could test this Workflow. In order to do this,\nyou need to import the ",(0,r.kt)("inlineCode",{parentName:"p"},"TestWorkflowEnvironment"),", the pieces from ",(0,r.kt)("inlineCode",{parentName:"p"},"Mocha")," that you need, as well as\nyour Worker, Workflow, and the Activities."),(0,r.kt)("p",null,"Create the file ",(0,r.kt)("inlineCode",{parentName:"p"},"workflows.test.ts")," and add the following code to the file to define the Workflow test:"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://github.com/temporalio/samples-typescript/blob/main/hello-world/src/mocha/workflows.test.ts"},"hello-world/src/mocha/workflows.test.ts")),(0,r.kt)(i.Z,{groupId:"language",defaultValue:"ts",values:[{label:"TypeScript",value:"ts"},{label:"JavaScript",value:"js"}],mdxType:"Tabs"},(0,r.kt)(a.Z,{value:"ts",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},"import { TestWorkflowEnvironment } from '@temporalio/testing';\nimport { before, describe, it } from 'mocha';\nimport { Worker } from '@temporalio/worker';\nimport { example } from '../workflows';\nimport * as activities from '../activities';\nimport assert from 'assert';\n\ndescribe('Example workflow', () => {\n  let testEnv: TestWorkflowEnvironment;\n\n  before(async () => {\n    testEnv = await TestWorkflowEnvironment.createLocal();\n  });\n\n  after(async () => {\n    await testEnv?.teardown();\n  });\n\n  it('successfully completes the Workflow', async () => {\n    const { client, nativeConnection } = testEnv;\n    const taskQueue = 'test';\n\n    const worker = await Worker.create({\n      connection: nativeConnection,\n      taskQueue,\n      workflowsPath: require.resolve('../workflows'),\n      activities,\n    });\n\n    const result = await worker.runUntil(\n      client.workflow.execute(example, {\n        args: ['Temporal'],\n        workflowId: 'test',\n        taskQueue,\n      })\n    );\n    assert.equal(result, 'Hello, Temporal!');\n  });\n});\n"))),(0,r.kt)(a.Z,{value:"js",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"import { TestWorkflowEnvironment } from '@temporalio/testing';\nimport { before, describe, it } from 'mocha';\nimport { Worker } from '@temporalio/worker';\nimport { example } from '../workflows';\nimport * as activities from '../activities';\nimport assert from 'assert';\n\ndescribe('Example workflow', () => {\n  let testEnv;\n  \n  before(async () => {\n    testEnv = await TestWorkflowEnvironment.createLocal();\n  });\n  \n  after(async () => {\n    await testEnv?.teardown();\n  });\n  \n  it('successfully completes the Workflow', async () => {\n    const { client, nativeConnection } = testEnv;\n    const taskQueue = 'test';\n    \n    const worker = await Worker.create({\n      connection: nativeConnection,\n      taskQueue,\n      workflowsPath: require.resolve('../workflows'),\n      activities,\n    });\n    \n    const result = await worker.runUntil(client.workflow.execute(example, {\n      args: ['Temporal'],\n      workflowId: 'test',\n      taskQueue,\n    }));\n    assert.equal(result, 'Hello, Temporal!');\n  });\n});\n")))),(0,r.kt)("p",null,"This test creates a test execution environment and then registers the Activity to the Worker. The test then executes the Workflow in the test environment and checks for a successful execution. Finally, the test ensures the Workflow's return value returns the expected value."),(0,r.kt)("p",null,"Run the following command from the project root to execute the unit tests:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-command"},"npm test\n")),(0,r.kt)("p",null,"You'll see output similar to the following from your test run indicating that the test was successful:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"> temporal-hello-world@0.1.0 test\n> mocha --exit --require ts-node/register --require source-map-support/register src/mocha/*.test.ts\n\n  greet activity\n    \u2713 successfully greets the user\n")),(0,r.kt)("p",null,"You have a working application and a test to ensure the Workflow executes as expected."),(0,r.kt)("h2",{id:"conclusion"},"Conclusion"),(0,r.kt)("p",null,"You now know how to build a basic Temporal application using the TypeScript SDK."),(0,r.kt)("h3",{id:"review"},"Review"),(0,r.kt)("p",null,"Answer the following questions to see whether you remember some of the important concepts from this tutorial:"),(0,r.kt)("details",null,(0,r.kt)("summary",null,(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"What are the four parts of a Temporal Workflow application?"))),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"A Workflow function."),(0,r.kt)("li",{parentName:"ol"},"An Activity function."),(0,r.kt)("li",{parentName:"ol"},"A Worker to host the Workflow and Activity code."),(0,r.kt)("li",{parentName:"ol"},"Some way to start the Workflow."))),(0,r.kt)("details",null,(0,r.kt)("summary",null,(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"How does the Temporal Server get information to the Worker?"))),(0,r.kt)("p",null,"The Temporal Server adds Tasks to a Task Queue, and the Worker polls the Task Queue.")))}d.isMDXComponent=!0},5986:(e,t,n)=>{n.d(t,{Z:()=>o});const o="data:image/png;base64,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"},2813:(e,t,n)=>{n.d(t,{Z:()=>o});const o=n.p+"assets/images/banner_typescript-2156b7edec5a96f12884d24603574199.png"}}]);